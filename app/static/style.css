
:root, .dark-theme { 
    --bg: #09090b; 
    --surface: #18181b; 
    --surface-hover: #27272a; 
    --text: #e4e4e7; 
    --text-dim: #a1a1aa; 
    --border: #3f3f46; 

    --primary-purple: #8b5cf6;
    --primary-glow-purple: rgba(139, 92, 246, 0.4);
    --primary-blue: #3b82f6;
    --primary-glow-blue: rgba(59, 130, 246, 0.4);
    --primary-green: #22c55e;
    --primary-glow-green: rgba(34, 197, 94, 0.4);
    --primary-orange: #f97316;
    --primary-glow-orange: rgba(249, 115, 22, 0.4);

    --primary: var(--primary-purple);
    --primary-glow: var(--primary-glow-purple);
}
body[data-accent="blue"] { --primary: var(--primary-blue); --primary-glow: var(--primary-glow-blue); }
body[data-accent="green"] { --primary: var(--primary-green); --primary-glow: var(--primary-glow-green); }
body[data-accent="orange"] { --primary: var(--primary-orange); --primary-glow: var(--primary-glow-orange); }

.light-theme {
    --bg: #f4f4f5;
    --surface: #ffffff;
    --surface-hover: #f0f0f0;
    --text: #18181b;
    --text-dim: #71717a;
    --border: #e4e4e7;
}

* { box-sizing: border-box; }
body { 
    margin: 0; 
    font-family: 'Inter', sans-serif; 
    background: var(--bg); 
    color: var(--text); 
    overflow: hidden; 
    transition: background 0.3s, color 0.3s;
}
.bg-orb { position: fixed; border-radius: 50%; filter: blur(100px); opacity: 0.15; z-index: -1; }
.orb-1 { width: 500px; height: 500px; background: var(--primary); top: -100px; left: -100px; }
.orb-2 { width: 400px; height: 400px; background: #ec4899; bottom: -50px; right: -50px; }
.app-layout { display: flex; height: 100vh; }
.sidebar { width: 338px; background: rgba(24, 24, 27, 0.6); backdrop-filter: blur(20px); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 20px; }
.content { flex: 1; overflow-y: auto; padding: 0 40px 40px 40px; position: relative; }
.logo { font-size: 24px; font-weight: 800; color: white; margin-bottom: 40px; letter-spacing: -1px; }
.logo span { color: var(--primary); }
nav a { display: flex; align-items: center; gap: 12px; color: var(--text-dim); text-decoration: none; padding: 12px; border-radius: 8px; transition: 0.2s; margin-bottom: 5px; }
nav a:hover, nav a.active { background: var(--surface-hover); color: white; }
nav a.active { border-left: 3px solid var(--primary); }
.sep { height: 1px; background: var(--border); margin: 20px 0; }
.nav-label { font-size: 11px; text-transform: uppercase; color: var(--text-dim); margin-bottom: 10px; font-weight: 600; }
.batch-select { width: 100%; background: var(--bg); border: 1px solid var(--border); color: white; padding: 8px; border-radius: 6px; }
.btn-import { width: 100%; background: var(--primary); border: none; padding: 12px; border-radius: 8px; color: white; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: 0.2s; box-shadow: 0 4px 15px var(--primary-glow); }
.btn-import:hover { transform: translateY(-2px); }
.btn-ghost { background: transparent; border: 1px solid var(--border); color: var(--text); padding: 8px; border-radius: 6px; cursor: pointer; }
.top-bar { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; position: sticky; top: 0; z-index: 10; background: linear-gradient(to bottom, var(--bg) 80%, transparent); }
.search-wrapper { position: relative; width: 400px; }
.search-wrapper input { width: 100%; background: var(--surface); border: 1px solid var(--border); padding: 12px 12px 12px 45px; border-radius: 50px; color: white; outline: none; transition: 0.2s; }
.search-wrapper input:focus { border-color: var(--primary); box-shadow: 0 0 0 2px var(--primary-glow); }
.search-wrapper span { position: absolute; left: 15px; top: 12px; color: var(--text-dim); }
.top-actions { display: flex; gap: 15px; }
.top-actions button, .filter-dropdown-trigger, a.top-action-btn { background: var(--surface); border: 1px solid var(--border); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: 0.2s; text-decoration: none; }
.top-actions a.top-action-btn { padding: 8px; } /* Icon only */
.top-actions button.active { background: var(--primary); border-color: var(--primary); }
.filter-panel { background: var(--surface); border: 1px solid var(--border); padding: 20px; border-radius: 12px; margin-bottom: 20px; }
.filter-row { display: flex; gap: 20px; }
.f-group { display: flex; flex-direction: column; gap: 8px; flex: 1; }
.f-group.wide { flex: 2; }
.f-group select { background: var(--bg); border: 1px solid var(--border); color: white; padding: 8px; border-radius: 6px; }
.date-filter-input {
    background: var(--bg);
    border: 1px solid var(--border);
    color: white;
    padding: 7px; /* A bit smaller to align with select */
    border-radius: 6px;
    color-scheme: dark;
}

.tag-filter-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}
.tag-filter-btn {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text-dim);
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    transition: 0.2s;
}
.tag-filter-btn:hover {
    background: var(--surface-hover);
    color: white;
    border-color: var(--primary);
}

/* GRID UPDATED FOR 5 COLUMNS ON DESKTOP */
.vip-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; }
@media (min-width: 1600px) {
    .vip-grid { grid-template-columns: repeat(5, 1fr); }
}

.v-card { background: var(--surface); border-radius: 12px; overflow: hidden; border: 1px solid transparent; transition: 0.3s; cursor: pointer; position: relative; }
.v-card:hover { transform: translateY(-6px); border-color: var(--primary); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
.v-card.selected { border-color: var(--primary); background: var(--surface-hover); }
.thumb-wrapper { position: relative; aspect-ratio: 16/9; background: black; overflow: hidden; }
.static-thumb { width: 100%; height: 100%; object-fit: cover; transition: opacity 0.2s; }
.motion-thumb { position: absolute; top:0; left:0; width: 100%; height: 100%; background-size: cover; background-position: center; z-index: 2; pointer-events: none; }

/* -- NEW/UPDATED OVERLAY STYLES -- */
.duration-chip, .quality-chip, .status-badge {
  position: absolute;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(5px);
  padding: 3px 8px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  color: #fff;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  z-index: 3;
  border: 1px solid rgba(255,255,255,0.1);
}
.duration-chip { bottom: 8px; right: 8px; }
.quality-chip { bottom: 8px; left: 8px; }
.status-badge {
    top: 8px;
    left: 8px;
    text-transform: uppercase;
    font-size: 10px;
    font-weight: bold;
    letter-spacing: 0.5px;
}
.status-ready { background: rgba(34, 197, 94, 0.7); color: #f0fdf4; }
.status-processing { background: rgba(59, 130, 246, 0.7); color: #eff6ff; animation: pulse 2s infinite; }
.status-pending { background: rgba(249, 115, 22, 0.7); color: #fff7ed; }
.status-error { background: rgba(239, 68, 68, 0.7); color: #fef2f2; }
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}
/* -- END OVERLAY STYLES -- */

.q-4k { color: #d8b4fe; } 
.q-fhd { color: #86efac; }
.progress-track { position: absolute; bottom: 0; left: 0; width: 100%; height: 3px; background: rgba(255,255,255,0.1); z-index: 4; }
.progress-fill { height: 100%; background: var(--primary); }
.v-meta { padding: 16px; }
.v-title-row { display: flex; justify-content: space-between; align-items: center; gap: 8px; margin-bottom: 8px; }
.v-title { font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.download-btn { color: var(--text-dim); text-decoration: none; transition: .2s; }
.download-btn:hover { color: var(--primary); }
.download-btn span { font-size: 20px; }
.v-tags { display: flex; gap: 6px; }
.v-tags span { font-size: 10px; background: var(--bg); padding: 2px 6px; border-radius: 4px; color: var(--text-dim); text-transform: uppercase; }

/* REGENERATE BUTTON - MOVED to top right */
.regen-btn { position: absolute; top: 8px; right: 8px; left: auto; z-index: 20; background: rgba(0,0,0,0.7); border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; opacity: 0; transition: 0.2s; cursor: pointer; border: 1px solid rgba(255,255,255,0.2); }
.v-card:hover .regen-btn { opacity: 1; }
.regen-btn:hover { background: var(--primary); transform: rotate(180deg); }
.regen-btn span { font-size: 18px; color: white; }

/* PLAYER & SPLIT */
.player-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); z-index: 100; display: flex; justify-content: center; align-items: center; }
.player-container { width: 95%; max-width: 1400px; height: 80vh; display: flex; gap: 20px; transition: 0.3s; }
.player-container.split-view { max-width: 98%; }
.player-box { flex: 1; background: black; border-radius: 16px; overflow: hidden; display: flex; flex-direction: column; position: relative; border: 2px solid transparent; transition: 0.2s; }
.player-box.active-focus { border-color: var(--primary); box-shadow: 0 0 30px rgba(139, 92, 246, 0.2); }
.video-wrapper { flex: 1; position: relative; overflow: hidden; background: #000; }
.video-wrapper video { width: 100%; height: 100%; object-fit: contain; }

/* Redesigned Player Header as an overlay */
.player-header {
    position: absolute;
    top: 0; left: 0; right: 0;
    z-index: 10;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: linear-gradient(to bottom, rgba(0,0,0,0.6) 0%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none; /* Allow clicks to go through to video */
}
.player-box:hover .player-header {
    opacity: 1;
    pointer-events: auto; /* Enable buttons when visible */
}
.player-header h2 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
}
.p-actions { display: flex; gap: 10px; }
.p-actions button {
    background: rgba(30,30,30,0.7);
    border: 1px solid rgba(255,255,255,0.15);
    color: white;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(5px);
    transition: 0.2s;
}
.p-actions button:hover {
    background: var(--primary);
    border-color: var(--primary);
}
.p-actions button span { font-size: 20px; }
/* End of Player Header styles */

.empty-split-slot { height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--text-dim); border: 2px dashed var(--border); }

.video-controls-bar { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); background: rgba(24, 24, 27, 0.9); backdrop-filter: blur(10px); padding: 10px 25px; border-radius: 50px; border: 1px solid var(--border); display: flex; gap: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); z-index: 200; }
.vc-row { display: flex; align-items: center; gap: 15px; }
.vc-group { display: flex; align-items: center; gap: 8px; color: var(--text-dim); }
.vc-group input[type=range] { width: 80px; accent-color: var(--primary); }
.vc-group.sep { border-left: 1px solid var(--border); padding-left: 15px; }
.vc-btn { background: transparent; border: 1px solid var(--border); color: white; padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; }
.filter-preset-select {
    background: rgba(0,0,0,0.3);
    border: 1px solid var(--border);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
}

.settings-card { width: 500px; }
.settings-tabs {
    display: flex;
    border-bottom: 1px solid var(--border);
    margin-bottom: 20px;
}
.settings-tabs button {
    background: none;
    border: none;
    color: var(--text-dim);
    padding: 10px 20px;
    cursor: pointer;
    font-size: 14px;
    border-bottom: 2px solid transparent;
    font-weight: 500;
}
.settings-tabs button.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
}
.accent-picker { display: flex; gap: 10px; }
.accent-swatch {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 2px solid var(--surface);
    cursor: pointer;
    outline-offset: 2px;
    transition: 0.2s;
}
.accent-swatch.active { outline: 2px solid var(--primary); }
.accent-swatch.purple { background: var(--primary-purple); }
.accent-swatch.blue { background: var(--primary-blue); }
.accent-swatch.green { background: var(--primary-green); }
.accent-swatch.orange { background: var(--primary-orange); }

.modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.settings-grid { display: flex; flex-direction: column; gap: 15px; }
.set-group { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid var(--border); }
.set-group label { font-size: 14px; }
.set-group select { background: var(--bg); border: 1px solid var(--border); color: white; padding: 5px; border-radius: 4px; }

.switch { position: relative; display: inline-block; width: 40px; height: 22px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #3f3f46; transition: .4s; }
.slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px; background-color: white; transition: .4s; }
input:checked + .slider { background-color: var(--primary); }
input:checked + .slider:before { transform: translateX(18px); }
.slider.round { border-radius: 34px; }
.slider.round:before { border-radius: 50%; }

.batch-bar { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: var(--surface); border: 1px solid var(--primary); padding: 10px 20px; border-radius: 50px; display: flex; align-items: center; gap: 20px; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 50; box-shadow: 0 10px 40px rgba(0,0,0,0.8); }
.batch-bar.visible { transform: translateX(-50%) translateY(0); }
.batch-actions { display: flex; gap: 10px; align-items: center; }
.batch-actions button, .batch-actions a.batch-action-btn { background: transparent; border: none; color: white; cursor: pointer; display: flex; align-items: center; gap: 5px; padding: 5px 10px; border-radius: 20px; transition: 0.2s; text-decoration: none; }
.batch-actions button:hover, .batch-actions a.batch-action-btn:hover { background: rgba(255,255,255,0.1); }
.batch-actions button.danger:hover { background: rgba(220, 38, 38, 0.2); color: #fca5a5; }

.load-more-area { text-align: center; margin: 40px 0; }
.btn-load-more { background: var(--surface); border: 1px solid var(--border); color: white; padding: 12px 30px; border-radius: 50px; cursor: pointer; font-size: 14px; display: inline-flex; align-items: center; gap: 10px; transition: 0.2s; }
.btn-load-more:hover { background: var(--primary); border-color: var(--primary); }

.spinner { width: 30px; height: 30px; border: 3px solid var(--border); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s infinite linear; margin: 20px auto; }
@keyframes spin { to { transform: rotate(360deg); } }
.toast-container { position: fixed; top: 20px; right: 20px; z-index: 2000; }
.toast { background: var(--surface); border-left: 4px solid var(--primary); padding: 15px 20px; margin-bottom: 10px; border-radius: 6px; display: flex; gap: 10px; align-items: center; box-shadow: 0 5px 15px rgba(0,0,0,0.3); animation: slideIn 0.3s; }
.toast.error { border-left-color: #ef4444; }
@keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
.drag-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(139, 92, 246, 0.9); z-index: 5000; display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: 0.3s; backdrop-filter: blur(5px); }
.drag-overlay.active { opacity: 1; pointer-events: auto; }
.modal-wrap { 
    position: fixed; 
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.8); 
    z-index: 3000; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    backdrop-filter: blur(5px);
    padding: 20px;
    overflow-y: auto;
    overflow-x: hidden;
    box-sizing: border-box;
}
.modal-card { 
    background: var(--surface); 
    padding: 30px; 
    border-radius: 12px; 
    width: 100%;
    max-width: 500px;
    max-height: calc(100vh - 40px);
    border: 1px solid var(--border); 
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    overflow: hidden;
    margin: auto;
    position: relative;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
}
/* Allow inline styles to override width for larger modals */
.modal-card[style*="min-width"] {
    max-width: calc(100vw - 40px);
}
.modal-card h3 { margin-top: 0; color: white; }
.modal-card textarea { width: 100%; height: 150px; background: var(--bg); border: 1px solid var(--border); color: white; padding: 10px; margin: 15px 0; border-radius: 6px; resize: vertical; }
.modal-card input { width: 100%; background: var(--bg); border: 1px solid var(--border); color: white; padding: 10px; margin-bottom: 20px; border-radius: 6px; }
.modal-content { 
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    min-height: 0;
}
.modal-actions { 
    display: flex; 
    justify-content: flex-end; 
    gap: 10px; 
    flex-wrap: wrap;
    flex-shrink: 0;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
}
.modal-header button {
    background: transparent;
    border: none;
    color: var(--text-dim);
    cursor: pointer;
    padding: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: 0.2s;
}
.modal-header button:hover {
    background: var(--surface-hover);
    color: white;
}

/* Responsive modals */
@media (max-width: 768px) {
    .modal-wrap {
        padding: 10px;
    }
    .modal-card {
        padding: 20px;
        max-height: calc(100vh - 20px);
        max-width: calc(100vw - 20px) !important;
    }
    .modal-actions {
        flex-direction: column;
    }
    .modal-actions button {
        width: 100%;
    }
}
.btn-primary { background: var(--primary); border: none; padding: 10px 20px; border-radius: 6px; color: white; font-weight: 600; cursor: pointer; }
.v-tags.ai-tags span { background: #3f3f46; color: #a1a1aa; font-style: italic; }

/* --- HOVER PREVIEW --- */
.gif-thumb {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 2;
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
}
.v-card:hover .static-thumb {
    opacity: 0;
}
.v-card:hover .gif-thumb {
    opacity: 1;
}
/* -------------------- */

.mega-search-wrap { align-items: flex-start; padding-top: 10vh; }
.mega-search-card { width: 700px; max-width: 90vw; background: rgba(30,30,33,0.9); backdrop-filter: blur(15px); }
.mega-search-input { display: flex; align-items: center; gap: 15px; border-bottom: 1px solid var(--border); padding-bottom: 15px; }
.mega-search-input span { font-size: 32px; color: var(--text-dim); }
.mega-search-input input { background: transparent; border: none; color: white; font-size: 24px; width: 100%; outline: none; }
.mega-search-results { max-height: 60vh; overflow-y: auto; margin-top: 15px; }
.sub-result-item { display: flex; gap: 15px; padding: 12px; border-radius: 8px; cursor: pointer; transition: 0.2s; }
.sub-result-item:hover { background: var(--surface-hover); }
.sub-thumb { width: 120px; height: 67px; object-fit: cover; border-radius: 6px; }
.sub-meta h4 { margin: 0 0 5px 0; color: white; }
.sub-meta p { margin: 0; color: var(--text-dim); font-size: 14px; }
.sub-meta mark { background: var(--primary); color: white; border-radius: 3px; }
.no-results { text-align: center; color: var(--text-dim); padding: 40px; }
